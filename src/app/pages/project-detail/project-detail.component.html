<!-- Loading State -->
<div *ngIf="isLoading" class="min-h-screen bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="animate-pulse">
      <!-- Header Skeleton -->
      <div class="mb-8">
        <div class="h-10 bg-gray-300 rounded w-32 mb-4"></div>
        <div class="h-12 bg-gray-300 rounded w-3/4 mb-4"></div>
        <div class="h-6 bg-gray-300 rounded w-1/2"></div>
      </div>
      
      <!-- Image Skeleton -->
      <div class="h-96 bg-gray-300 rounded-lg mb-8"></div>
      
      <!-- Content Skeleton -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2 space-y-4">
          <div class="h-6 bg-gray-300 rounded"></div>
          <div class="h-6 bg-gray-300 rounded"></div>
          <div class="h-6 bg-gray-300 rounded w-3/4"></div>
        </div>
        <div class="space-y-4">
          <div class="h-32 bg-gray-300 rounded"></div>
          <div class="h-32 bg-gray-300 rounded"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Not Found State -->
<div *ngIf="!isLoading && notFound" class="min-h-screen bg-gray-50 flex items-center justify-center">
  <div class="text-center">
    <div class="w-24 h-24 mx-auto mb-6 text-gray-400">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 20.4a7.962 7.962 0 01-8-7.934V5a3 3 0 016 0v6.5c0 .621.504 1.125 1.125 1.125H12M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
    </div>
    <h1 class="text-4xl font-bold text-gray-900 mb-4">Projeto não encontrado</h1>
    <p class="text-lg text-gray-600 mb-8">O projeto que você está procurando não existe ou foi removido.</p>
    <button (click)="goBack()" class="btn-primary">
      Voltar ao Portfólio
    </button>
  </div>
</div>

<!-- Project Detail Content -->
<div *ngIf="!isLoading && !notFound && project" class="min-h-screen bg-gray-50">
  <!-- Hero Section -->
  <section class="bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <!-- Back Button -->
      <button (click)="goBack()" 
              class="inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200 mb-8">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Voltar ao Portfólio
      </button>

      <!-- Project Header -->
      <div class="mb-8">
        <div class="flex flex-wrap items-center gap-2 mb-4">
          <span *ngIf="project.featured" 
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-800">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
            </svg>
            Projeto Destacado
          </span>
        </div>
        
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
          {{ project.title }}
        </h1>
        
        <p class="text-xl text-gray-600 max-w-3xl">
          {{ project.description }}
        </p>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-wrap gap-4">
        <a *ngIf="project.liveUrl" 
           [href]="project.liveUrl" 
           target="_blank" 
           class="btn-primary">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
          Ver Projeto
        </a>
        
        <a *ngIf="project.githubUrl" 
           [href]="project.githubUrl" 
           target="_blank" 
           class="btn-secondary">
          <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clip-rule="evenodd"></path>
          </svg>
          Ver Código
        </a>
      </div>
    </div>
  </section>

  <!-- Project Image -->
  <section *ngIf="project.image" class="bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="rounded-lg overflow-hidden shadow-lg">
        <img [src]="getImageUrl(project.image)" 
             [alt]="project.title"
             class="w-full h-96 object-cover">
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <!-- Project Content -->
        <div class="lg:col-span-2">
          <div class="card p-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Sobre o Projeto</h2>
            <div class="prose prose-lg max-w-none text-gray-700">
              <p>{{ project.content }}</p>
            </div>
          </div>

          <!-- Gallery -->
          <div *ngIf="project.gallery && project.gallery.length > 0" class="card p-8 mt-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Galeria</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div *ngFor="let image of project.gallery" class="rounded-lg overflow-hidden shadow-md">
                <img [src]="getImageUrl(image)" 
                     [alt]="project.title + ' - Galeria'"
                     class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300">
              </div>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="space-y-8">
          <!-- Technologies -->
          <div class="card p-6">
            <h3 class="text-lg font-bold text-gray-900 mb-4">Tecnologias Utilizadas</h3>
            <div class="flex flex-wrap gap-2">
              <span *ngFor="let tech of project.technologies" 
                    class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800">
                {{ tech }}
              </span>
            </div>
          </div>

          <!-- Project Links -->
          <div class="card p-6">
            <h3 class="text-lg font-bold text-gray-900 mb-4">Links do Projeto</h3>
            <div class="space-y-3">
              <a *ngIf="project.liveUrl" 
                 [href]="project.liveUrl" 
                 target="_blank" 
                 class="flex items-center text-primary-600 hover:text-primary-700 transition-colors duration-200">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
                Ver Projeto Online
              </a>
              
              <a *ngIf="project.githubUrl" 
                 [href]="project.githubUrl" 
                 target="_blank" 
                 class="flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clip-rule="evenodd"></path>
                </svg>
                Ver Código no GitHub
              </a>
            </div>
          </div>

          <!-- Share Project -->
          <div class="card p-6">
            <h3 class="text-lg font-bold text-gray-900 mb-4">Compartilhar</h3>
            <div class="flex space-x-3">
              <button class="p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors duration-200">
                <svg class="w-5 h-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Related Projects -->
  <section *ngIf="relatedProjects.length > 0" class="bg-white border-t border-gray-200 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">
        Outros Projetos
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div *ngFor="let relatedProject of relatedProjects; trackBy: trackByProjectId" 
             class="card overflow-hidden hover:shadow-lg transition-shadow duration-300">
          <div class="aspect-video bg-gray-200 overflow-hidden">
            <img *ngIf="relatedProject.image" 
                 [src]="getImageUrl(relatedProject.image)" 
                 [alt]="relatedProject.title"
                 class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
            <div *ngIf="!relatedProject.image" 
                 class="w-full h-full flex items-center justify-center text-gray-400">
              <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
          </div>
          
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2">
              {{ relatedProject.title }}
            </h3>
            <p class="text-gray-600 mb-4 line-clamp-2">
              {{ relatedProject.description }}
            </p>
            
            <div class="flex flex-wrap gap-2 mb-4">
              <span *ngFor="let tech of relatedProject.technologies.slice(0, 3)" 
                    class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800">
                {{ tech }}
              </span>
              <span *ngIf="relatedProject.technologies.length > 3" 
                    class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800">
                +{{ relatedProject.technologies.length - 3 }}
              </span>
            </div>
            
            <a [routerLink]="['/project', relatedProject.slug]" 
               class="btn-primary w-full text-center">
              Ver Detalhes
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>